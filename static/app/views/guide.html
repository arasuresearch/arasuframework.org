<div id="guide">

    <h3>Chapters</h3>

    <ol class="chapters">
        <li><a href ng-click="scrollTo('guide-assumptions')">Guide Assumptions</a></li>
        <li><a href ng-click="scrollTo('what-is-arasu-questionmark')">What is Arasu?</a></li>
        <li>
            <a href ng-click="scrollTo('creating-a-new-arasu-project')">Creating a New Arasu Project</a>

            <ul>
                <li><a href ng-click="scrollTo('installing-arasu')">Installing Arasu</a></li>
                <li><a href ng-click="scrollTo('creating-the-blog-application')">Creating the Blog Application</a></li>
            </ul>
        </li>
        <li>
            <a href ng-click="scrollTo('hello-arasu-bang')">Hello, Arasu!</a>

            <ul>
                <li><a href ng-click="scrollTo('starting-up-the-web-server')">Starting up the Web Server</a></li>
                <li><a href ng-click="scrollTo('say-hello-arasu')">Say "Hello", Arasu</a></li>
                <li><a href ng-click="scrollTo('setting-the-application-home-page')">Setting the Application Home
                    Page</a></li>
            </ul>
        </li>
        <li>
            <a href ng-click="scrollTo('getting-up-and-running')">Getting Up and Running</a>

            <ul>
                <li><a href ng-click="scrollTo('laying-down-the-ground-work')">Laying down the ground work</a></li>
                <li><a href ng-click="scrollTo('the-first-form')">The first form</a></li>
                <li><a href ng-click="scrollTo('creating-articles')">Creating articles</a></li>
                <li><a href ng-click="scrollTo('creating-the-article-model')">Creating the Article model</a></li>
                <li><a href ng-click="scrollTo('running-a-migration')">Running a Migration</a></li>
                <li><a href ng-click="scrollTo('saving-data-in-the-controller')">Saving data in the controller</a></li>
                <li><a href ng-click="scrollTo('showing-articles')">Showing Articles</a></li>
                <li><a href ng-click="scrollTo('listing-all-articles')">Listing all articles</a></li>
                <li><a href ng-click="scrollTo('adding-links')">Adding links</a></li>
                <li><a href ng-click="scrollTo('adding-some-validation')">Adding Some Validation</a></li>
                <li><a href ng-click="scrollTo('updating-articles')">Updating Articles</a></li>
                <li><a href ng-click="scrollTo('using-partials-to-clean-up-duplication-in-views')">Using partials to
                    clean up duplication in
                    views</a></li>
                <li><a href ng-click="scrollTo('deleting-articles')">Deleting Articles</a></li>
            </ul>
        </li>
        <li>
            <a href ng-click="scrollTo('adding-a-second-model')">Adding a Second Model</a>

            <ul>
                <li><a href ng-click="scrollTo('generating-a-model')">Generating a Model</a></li>
                <li><a href ng-click="scrollTo('associating-models')">Associating Models</a></li>
                <li><a href ng-click="scrollTo('adding-a-route-for-comments')">Adding a Route for Comments</a></li>
                <li><a href ng-click="scrollTo('generating-a-controller')">Generating a Controller</a></li>
            </ul>
        </li>
        <li>
            <a href ng-click="scrollTo('refactoring')">Refactoring</a>

            <ul>
                <li><a href ng-click="scrollTo('rendering-partial-collections')">Rendering Partial Collections</a></li>
                <li><a href ng-click="scrollTo('rendering-a-partial-form')">Rendering a Partial Form</a></li>
            </ul>
        </li>
        <li>
            <a href ng-click="scrollTo('deleting-comments')">Deleting Comments</a>

            <ul>
                <li><a href ng-click="scrollTo('deleting-associated-objects')">Deleting Associated Objects</a></li>
            </ul>
        </li>
        <li>
            <a href ng-click="scrollTo('security')">Security</a>

            <ul>
                <li><a href ng-click="scrollTo('basic-authentication')">Basic Authentication</a></li>
                <li><a href ng-click="scrollTo('other-security-considerations')">Other Security Considerations</a></li>
            </ul>
        </li>
        <li><a href ng-click="scrollTo('what-s-next-questionmark')">What's Next?</a></li>
        <li><a href ng-click="scrollTo('configuration-gotchas')">Configuration Gotchas</a></li>
    </ol>

</div>
<div id="guide-content">


<h3 id="guide-assumptions">1 Guide Assumptions</h3>

<p>This guide is designed for beginners who want to get started with a Arasu
    application from scratch. It does not assume that you have any prior experience
    with Arasu. However, to get the most out of it, you need to have some
    prerequisites installed:</p>
<ul>
    <li><a href="http://golang.org/doc/install#download">Go</a> language version 1.3 or above.</li>
    <li><a href="https://www.dartlang.org/">Dart</a> language version 1.5.8 or above.</li>
    <li>A working installation of <a href="http://www.mysql.com/">Myql Database</a>.</li>
    <li>A working installation of <a href="http://hbase.apache.org">Hbase  Datastore</a>.</li>
</ul>

<p>Arasu is a full stack web application framework running on top Go programming language , Dart Programming Language and Angular Dart.
    If you have no prior experience with Go,Dart,AngularDart, you will find a very steep learning
    curve diving straight into Arasu. There are several curated lists of online resources
    for learning Go , Dart, AngularDart .</p>
<ul>
    <li>Official<a href="http://golang.org/doc/"> Go </a>Programming Language website</li>
    <li>Official <a href="https://www.dartlang.org/docs/"> Dart </a>Programming Language website</li>
    <li>Official <a href="https://www.angulardart.org/"> AngularDart </a>framework website</li>
</ul>


<h3 id="what-is-arasu-questionmark">2 What is Arasu?</h3>

<p>Arasu is a web application development framework written on top of Go , Dart and AngularDart.
    It is designed to make programming web applications easier by making assumptions
    about what every developer needs to get started. It allows you to write less
    code while accomplishing more than many other languages and frameworks.
    Experienced Arasu developers also report that it makes web application
    development more fun.</p>

<p>Arasu is opinionated software. It makes the assumption that there is the "best"
    way to do things, and it's designed to encourage that way - and in some cases to
    discourage alternatives. If you learn "The Arasu Way" you'll probably discover a
    tremendous increase in productivity. If you persist in bringing old habits from
    other languages to your Arasu development, and trying to use patterns you
    learned elsewhere, you may have a less happy experience.</p>

<p>The Arasu philosophy includes two major guiding principles:</p>
<ul>
    <li>
        <strong>Don't Repeat Yourself:</strong> DRY is a principle of software development which
        states that "Every piece of knowledge must have a single, unambiguous, authoritative
        representation within a system." By not writing the same information over and over
        again, our code is more maintainable, more extensible, and less buggy.
    </li>
    <li>
        <strong>Convention Over Configuration:</strong> Arasu has opinions about the best way to do many
        things in a web application, and defaults to this set of conventions, rather than
        require that you specify every minutiae through endless configuration files.
    </li>
</ul>
<h3 id="creating-a-new-arasu-project">3 Creating a New Arasu Project</h3>

<p>The best way to use this guide is to follow each step as it happens, no code or
    step needed to make this example application has been left out, so you can
    literally follow along step by step. You can get the complete code
    <a href="https://github.com/arasuresearch/arasu/blob/master/README.md">here</a>.</p>

<p>By following along with this guide, you'll create a new Arasu project called
    <code>blog</code>, a
    (very) simple weblog. Before you can start building the application, you need to
    make sure that you have Arasu itself installed.</p>

<div class="info"><p>The examples below use <code>$</code> to represent your terminal prompt in a UNIX-like OS,
    though it may have been customized to appear differently. If you are using Windows,
    your prompt will look something like <code>c:\source_code&gt;</code></p></div>



<h4 id="installing-arasu">3.1 Installing Arasu</h4>

<p>Open up a command  prompt. On Mac OS X open Terminal.app, on Windows choose
    "Run" from your Start menu and type 'cmd.exe'. Any commands prefaced with a
    dollar sign <code>$</code> should be run in the command line. Verify that you have a
    current version of Go installed:</p>
<!--
<div class="info"><p>A number of tools exist to help you quickly install Go and Go
    on Arasu on your system. Windows users can use <a href="http://arasuinstaller.org">Arasu Installer</a>,
    while Mac OS X users can use <a href="http://arasuoneclick.com">Arasu One Click</a>.</p></div>
-->
<h5 id="installing-arasu">3.1.1 Installing Golang</h5>

        Install <a href="http://golang.org/dl/">Go</a> language, version 1.3 or above.
        for example Download <a href="http://golang.org/dl/go1.3.linux-amd64.tar.gz"> go1.3.linux-amd64.tar.gz</a> <br>go v-1.3 is the latest version 
        when i wrote this article.
        after downloaded, extract "go1.3.linux-amd64.tar.gz" into a directory where you want to install go language.  i used ~/go directory to install go language.
        create a directory (~/gopackages) to keep non-builtin go packages  
        </br><code>~$ mkdir ~/gopackages </code></br>
        </br>
        add go root directory into system 
        </br><code>~$ echo 'export GOROOT=$HOME/go' >> ~/.bashrc</code></br>
        </br>
        add go packages directory into system 
        </br><code>~$ echo 'export GOPATH=$HOME/gopackages' >> ~/.bashrc</code></br>
        </br>
        add all binary into system PATH 
        </br><code>~$ echo 'export PATH="$GOROOT/bin:$GOPATH/bin:$PATH"' >> ~/.bashrc</code></br>
        </br>
        open a new terminal and verify the sucessfull installation by
        </br><code>~$ go version </code></br>
        <code> go version go1.3 linux/amd64 </code></br>
        if everything is ok then you have sucessfully installed and configured go.
        <br>
        <p>If you get any error then have a look at <a href="http://golang.org/doc/install#download">golang.org</a> for possible ways to
            install and Setup Go language on your specific platform like Windows, Mac.
        </p>
<br/>
<h5 id="installing-arasu">3.1.2 Installing Dartlang</h5>
        Install <a href="http://dartlang.org">Dart </a> language (Dart SDK), version 1.5.8 or above.
        for example Download <a href="http://storage.googleapis.com/dart-archive/channels/stable/release/latest/editor/darteditor-linux-x64.zip">darteditor-linux-x64.zip</a> <br>1.5.8 is the latest version, when i wrote this article.

        after downloaded, extract darteditor-linux-x64.zip into a directory where you want to install dart language. i used ~/dart directory to install dart language.
        </br>
        add dart binary into system PATH 
        </br><code>~$ echo 'export PATH="$HOME/dart/dart-sdk/bin:$PATH"' >> ~/.bashrc</code></br>
        </br>
        open a new terminal and verify the sucessfull installation by
        </br><code>~$ dart --version </code></br>
        <code> Dart VM version: 1.5.8 (Tue Jul 29 07:05:41 2014) on "linux_x64" </code></br>
        if everything is ok then you have sucessfully installed and configured dart.
        <br>
        <p>If you get any error then have a look at <a href="https://www.dartlang.org/">dartlang.org</a> for possible ways to
            install and Setup dart-sdk on your specific platform like Windows, Mac.
        </p>
<br/>
<h5 id="installing-arasu">3.1.3 Installing Mysql</h5>
        Install <a href="http://www.mysql.com">Mysql</a> Database.
        </br>
        open a terminal and verify the sucessfull mysql database installation by
        </br><code>~$ mysql --version </code></br>
        <code> mysql  Ver 14.14 Distrib 5.5.37, for debian-linux-gnu (x86_64) using readline 6.2 </code></br>
        if everything is ok then you have sucessfully installed mysql.
        <br>
        <p>If you get any error then have a look at <a href="www.mysql.com">mysql</a> for possible ways to
            install mysql database on your specific platform like Windows, Mac.
        </p>
<br/>
<h5 id="installing-arasu">3.1.4 Installing Hbase</h5>
        Install <a href="http://hbase.apache.org">Hbase </a> stable , version 0.98.4 with hadoop2 or above.

        for example Download <a href="http://apache.petsads.us/hbase/stable/hbase-0.98.4-hadoop2-bin.tar.gz">hbase-0.98.4-hadoop2-bin.tar.gz</a> <br> 0.98.4 is the latest version, when i wrote this article.

        after downloaded, hbase-0.98.4-hadoop2-bin.tar.gz into a directory where you want to install hbase . i used ~/hbase-0.98.4-hadoop2 directory to install hbase.
        </br>
        add hbase binary into system PATH 
        </br><code>~$ echo 'export PATH="$HOME/hbase-0.98.4-hadoop2/bin:$PATH"' >> ~/.bashrc</code></br>
        </br>
        open a new terminal and verify the sucessfull installation by
        </br><code>~$ hbase version </code></br>
        <code> some valid output </code></br>
        if everything is ok then you have sucessfully installed and configured hbase.
        <br>
        <p>If you get any error then have a look at <a href="http://hbase.apache.org">hbase</a> for possible ways to
            install and Setup hbase on your specific platform like Windows, Mac.
        </p>
<br/>

<h5 id="installing-arasu">3.1.5 Installing Arasu Framework</h5>
        </br><code>~$ go get github.com/arasuresearch/arasu</code></br>
        </br>
        open a new terminal and verify the sucessfull installation by
        </br><code>~$ arasu --version </code></br>
        <code> 0.0.1 </code></br>
        if everything is ok then you have sucessfully installed arasu.
        <br>
        <p>If you get any error then have a look at <a href="github.com/arasuresearch/arasu">arasu</a> Readme for specific solution.
        </p>
<br/>
<!--
<p>Many popular UNIX-like OSes ship with an acceptable version of SQLite3. Windows
    users and others can find installation instructions at <a href="http://www.sqlite.org">the SQLite3 website</a>.
    Verify that it is correctly installed and in your PATH:</p>

<div class="code_container">
<code> $ sqlite3 --version </code>
</div>
<p>The program should report its version.</p>
-->




<h4 id="creating-the-blog-application">3.2 Creating the Blog Application</h4>

<p>Arasu comes with a number of scripts called generators that are designed to make your development life easier by creating everything that's necessary to start working on a particular task. One of these is the new application generator, which will provide you with the foundation of a fresh Arasu application so that you don't have to write it yourself.</p>

<p>To use this generator, open a terminal, navigate to a directory where you have rights to create files, and type:</p>

<code>$ arasu new blog</code>

<p>This will create a Arasu application called Blog in a <code>blog</code> directory </p>
<!--
<p> and
    install the gem dependencies that are already mentioned in <code>Gemfile</code> using
    <code>bundle install</code>.</p>
-->

<div class="info"><p>You can see all of the command line options that the Arasu application builder accepts by running <code>arasu new -h</code>.</p></div>
<p>After you create the blog application, switch to its folder:</p>
<code>$ cd blog</code>
<p>The <code>blog</code> directory has a number of auto-generated files and folders that make
    up the structure of a Arasu application. Most of the work in this tutorial will
    happen in the <code>src/server</code> & <code>src/client</code> folder, but here's a basic rundown on the function of each
    of the files and folders that Arasu created by default:</p>
<table class="responsive">
    <thead>
    <tr>
        <th>File/Folder</th>
        <th>Purpose</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>src/server/</td>
        <td>Contains the Server Side Controllers, Models, Routes, helpers, Dispatchers for your application. You'll focus on
            this folder along with <code>src/client/</code> for the remainder of this guide.
        </td>
    </tr>
    <tr>
        <td>src/client/</td>
        <td>Contains the Client Dart/Angular Application,Modules,Controllers,Components,Filters,Models, Templates and assets for your clientside application. You'll focus on this folder along with <code>src/server/</code> for the remainder of this guide.
        </td>
    </tr>
    <tr>
        <td>bin/ & pkg/</td>
        <td>You no need to worry about these two folders because Go runtime will take care of it.
        if you want more details then read <a href="http://golang.org/doc/">Golang Doc</a>
        </td>
    </tr>

    <tr>
        <td>src/config/</td>
        <td>Configure your application's properties like datastore configuration ,session cnfiguration, and more. This is covered in more detail in <a
                href="configuring.html">Configuring Arasu Applications</a>.
        </td>
    </tr>
    <tr>
        <td>src/db/</td>
        <td>Contains your current database schema, as well as the database migrations. This is covered in more detail in <a
                href="dstore.html">Datastore Configuration of Arasu Applications</a>.
        </td>
    </tr>
    <tr>
        <td>src/boot/</td>
        <td>this is the main place where the arasu app will get started.you can initialize all other dependencies here.</td>
    </tr>
    <tr>
        <td>/src/client/pubspec.yaml & pubspec.lock</td>
        <td>These files allow you to specify what dart pub dependencies are needed for your Arasu application.These files are used by the dart pub tool. For more information about pub, see the <a href="pub.dartlang.org">pub</a> website.  </td>
    </tr>
    <tr>
        <td>/src/client/web/</td>
        <td>The only folder seen by the world as-is. Contains static files and compiled dart & js assets.</td>
    </tr>
    <tr>
        <td>/src/client/lib/</td>
        <td>all Angular Dart related packages will be put up here.
            like all controllers,models,modules,views,components,filters,directives,services, and more respectively in the path of /src/client/lib/* .
        </td>
    </tr>
    <tr>
        <td>/src/tmp/arasu/*</td>
        <td>This file locates and loads packages that can be run from the command line. The packages definitions are defined
            throughout the combined packages of Arasu Framework and Arasu App . Rather than changing this, you should add your own packges by adding files to the lib/pkg directory of your application.
        </td>
    </tr>
    <tr>
        <td>README.md</td>
        <td>This is a brief instruction manual for your application. You should edit this file to tell others what your
            application does, how to set it up, and so on.
        </td>
    </tr>
    <tr>
        <td>/src/tmp/</td>
        <td>Temporary files ,like arasu commands, dispatchers, cache, pid, and session files.</td>
    </tr>
    <tr>
        <td>src/lib/</td>
        <td>Extended packages for your application.</td>
    </tr>
    <tr>
        <td>src/log/</td>
        <td>Application log files.</td>
    </tr>
    </tbody>
</table>
<h3 id="hello-arasu-bang">4 Hello, Arasu!</h3>

<p>To begin with, let's get some text up on screen quickly. To do this, you need to
    get your Arasu application server running.</p>
<h4 id="starting-up-the-web-server">4.1 Starting up the Web Server</h4>

<p>You actually have a functional Arasu application already. To see it, you need to
    start a web server on your development machine. You can do this by running the
    following in the <code>blog</code> directory:</p>

<code>~$ arasu serve</code>

<div class="info"><p>
    you will get output like "You don't have a lockfile, so we need to generate that:" by Dart Pub Manager ,
    this will pull all of your client dependencies .
    this will take few more seconds .this will occur only at first time for an arasu application.
  </p></div>

<p>This will fire up Go net/http server, a web server distributed with Go by default. To see  your application in action, open dartium browser window and navigate to
    <a href="http://localhost:4000">http://localhost:4000</a>. You should see the Arasu default information page:</p>

<p><img src="images/getting_started/arasu_welcome.png" alt="Welcome aboard screenshot"></p>

<div class="info"><p>To stop the web server, hit Ctrl+C in the terminal window where it's
    running. To verify the server has stopped you should see your command prompt
    cursor again. For most UNIX-like systems including Mac OS X this will be a
    dollar sign <code>$</code>. In development mode, Arasu does not generally require you to
    restart the server; changes you make in files will be automatically picked up by
    the server.</p></div>
<p>The "Welcome aboard" page is the <em>smoke test</em> for a new Arasu application: it
    makes sure that you have your software configured correctly enough to serve a
    page. You can also click on the <em>About your application's environment</em> link to
    see a summary of your application's environment.</p>
<h4 id="say-hello-arasu">4.2 Say "Hello", Arasu</h4>

<p>To get Arasu saying "Hello", you need to create at minimum a <em>controller</em> and a
    <em>view</em>.</p>

<p>A controller's purpose is to receive specific requests for the application.
    <em>Routing</em> decides which controller receives which requests. Often, there is more
    than one route to each controller, and different routes can be served by
    different <em>actions</em>. Each action's purpose is to collect information and serve to client as json or provide
    it to a json view and serve the json output.</p>

<p>A json view's purpose is to display this information in a json readable format. An
    important distinction to make is that it is the <em>controller</em>, not the view,
    where information is collected. The view should just display that information.
    By default, view templates are written in a language called Go Template (Embedded
    Go) which is processed by the request cycle in Arasu before being sent to the
    client.</p>

<p>To create a new controller, you will need to run the "controller" generator and
    tell it you want a controller called "welcome" with an action called "index",
    just like this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_134832" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ arasu generate controller
                                welcome index</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Arasu will create several files and a route file for you.</p>

<div class="code_container">
    <div>
        <div id="highlighter_940395" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">create&nbsp;
                                src/server/controllers/welcomes/main.go</code></div>
                            <div class="line number1 index0 alt2"><code class="plain plain">create&nbsp;
                                src/server/routes/welcomes.go</code></div>

                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;</code><code
                                    class="plain plain">route&nbsp; get 'welcome/index'</code></div>
                            <div class="line number3 index2 alt2"><code class="plain plain">invoke&nbsp; erb</code>
                            </div>
                            <div class="line number4 index3 alt1"><code class="plain plain">create&nbsp;&nbsp;&nbsp;
                                app/views/welcome</code></div>
                            <div class="line number5 index4 alt2"><code class="plain plain">create&nbsp;&nbsp;&nbsp;
                                app/views/welcome/index.html.erb</code></div>
                            <div class="line number6 index5 alt1"><code class="plain plain">invoke&nbsp;
                                test_unit</code></div>
                            <div class="line number7 index6 alt2"><code class="plain plain">create&nbsp;&nbsp;&nbsp;
                                test/controllers/welcome_controller_test.rb</code></div>
                            <div class="line number8 index7 alt1"><code class="plain plain">invoke&nbsp; helper</code>
                            </div>
                            <div class="line number9 index8 alt2"><code class="plain plain">create&nbsp;&nbsp;&nbsp;
                                app/helpers/welcome_helper.rb</code></div>
                            <div class="line number10 index9 alt1"><code class="plain plain">invoke&nbsp;&nbsp;&nbsp;
                                test_unit</code></div>
                            <div class="line number11 index10 alt2"><code class="plain plain">create&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                test/helpers/welcome_helper_test.rb</code></div>
                            <div class="line number12 index11 alt1"><code class="plain plain">invoke&nbsp; assets</code>
                            </div>
                            <div class="line number13 index12 alt2"><code class="plain plain">invoke&nbsp;&nbsp;&nbsp;
                                coffee</code></div>
                            <div class="line number14 index13 alt1"><code class="plain plain">create&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                app/assets/javascripts/welcome.js.coffee</code></div>
                            <div class="line number15 index14 alt2"><code class="plain plain">invoke&nbsp;&nbsp;&nbsp;
                                scss</code></div>
                            <div class="line number16 index15 alt1"><code class="plain plain">create&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                app/assets/stylesheets/welcome.css.scss</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Most important of these are of course the controller, located at <code>app/controllers/welcome_controller.rb</code>
    and the view, located at <code>app/views/welcome/index.html.erb</code>.</p>

<p>Open the <code>app/views/welcome/index.html.erb</code> file in your text editor. Delete all
    of the existing code in the file, and replace it with the following single line
    of code:</p>

<div class="code_container">
    <div>
        <div id="highlighter_672795" class="syntaxhighlighter nogutter  xml">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code
                                    class="xml keyword">h1</code><code class="xml plain">&gt;Hello,
                                Arasu!&lt;/</code><code class="xml keyword">h1</code><code class="xml plain">&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<h4 id="setting-the-application-home-page">4.3 Setting the Application Home Page</h4>

<p>Now that we have made the controller and view, we need to tell Arasu when we
    want "Hello, Arasu!" to show up. In our case, we want it to show up when we
    navigate to the root URL of our site, <a href="http://localhost:3000">http://localhost:3000</a>. At the moment,
    "Welcome aboard" is occupying that spot.</p>

<p>Next, you have to tell Arasu where your actual home page is located.</p>

<p>Open the file <code>config/routes.rb</code> in your editor.</p>

<div class="code_container">
    <div>
        <div id="highlighter_163504" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code
                                    class="go plain">Arasu.application.routes.draw </code><code class="go keyword">do</code>
                            </div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">get </code><code class="go string">'welcome/index'</code></div>
                            <div class="line number3 index2 alt2">&nbsp;</div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># The priority is based upon order of creation:</code></div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># first created -&gt; highest priority.</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments">#</code></div>
                            <div class="line number7 index6 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># You can have the root of your site routed with "root"</code>
                            </div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># root 'welcome#index'</code></div>
                            <div class="line number9 index8 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments">#</code></div>
                            <div class="line number10 index9 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># ...</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This is your application's <em>routing file</em> which holds entries in a special DSL
    (domain-specific language) that tells Arasu how to connect incoming requests to
    controllers and actions. This file contains many sample routes on commented
    lines, and one of them actually shows you how to connect the root of your site
    to a specific controller and action. Find the line beginning with <code>root</code> and
    uncomment it. It should look something like the following:</p>

<div class="code_container">
    <div>
        <div id="highlighter_785177" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go plain">root </code><code
                                    class="go string">'welcome#index'</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p><code>root 'welcome#index'</code> tells Arasu to map requests to the root of the
    application to the welcome controller's index action and <code>get 'welcome/index'</code>
    tells Arasu to map requests to <a href="http://localhost:3000/welcome/index">http://localhost:3000/welcome/index</a>
    to the
    welcome controller's index action. This was created earlier when you ran the
    controller generator (<code>arasu generate controller welcome index</code>).</p>

<p>Launch the web server again if you stopped it to generate the controller (<code>arasu
    server</code>) and navigate to <a href="http://localhost:3000">http://localhost:3000</a> in your browser. You'll see
    the
    "Hello, Arasu!" message you put into <code>app/views/welcome/index.html.erb</code>,
    indicating that this new route is indeed going to <code>WelcomeController</code>'s <code>index</code>
    action and is rendering the view correctly.</p>

<div class="info"><p>For more information about routing, refer to <a href="routing.html">Arasu Routing from the Outside
    In</a>.</p></div>
<h3 id="getting-up-and-running">5 Getting Up and Running</h3>

<p>Now that you've seen how to create a controller, an action and a view, let's
    create something with a bit more substance.</p>

<p>In the Blog application, you will now create a new <em>resource</em>. A resource is the
    term used for a collection of similar objects, such as articles, people or
    animals.
    You can create, read, update and destroy items for a resource and these
    operations are referred to as <em>CRUD</em> operations.</p>

<p>Arasu provides a <code>resources</code> method which can be used to declare a standard REST
    resource. Here's what <code>config/routes.rb</code> should look like after the
    <em>article resource</em> is declared.</p>

<div class="code_container">
    <div>
        <div id="highlighter_484573" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code
                                    class="go plain">Blog::Application.routes.draw </code><code class="go keyword">do</code>
                            </div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">resources </code><code class="go color2">:articles</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">root </code><code class="go string">'welcome#index'</code>
                            </div>
                            <div class="line number6 index5 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>If you run <code>rake routes</code>, you'll see that it has defined routes for all the
    standard RESTful actions. The meaning of the prefix column (and other columns)
    will be seen later, but for now notice that Arasu has inferred the
    singular form <code>article</code> and makes meaningful use of the distinction.</p>

<div class="code_container">
    <div>
        <div id="highlighter_549186" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ rake routes</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">Prefix Verb&nbsp;&nbsp; URI Pattern&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                Controller#Action</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">articles GET&nbsp;&nbsp;&nbsp;
                                /articles(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#index</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">POST&nbsp;&nbsp; /articles(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#create</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;</code><code
                                    class="plain plain">new_article GET&nbsp;&nbsp;&nbsp; /articles/new(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#new</code></div>
                            <div class="line number6 index5 alt1"><code class="plain plain">edit_article GET&nbsp;&nbsp;&nbsp;
                                /articles/:id/edit(.:format) articles#edit</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">article GET&nbsp;&nbsp;&nbsp; /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#show</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">PATCH&nbsp; /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#update</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">PUT&nbsp;&nbsp;&nbsp; /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#update</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">DELETE /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#destroy</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">root GET&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                welcome#index</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>In the next section, you will add the ability to create new articles in your
    application and be able to view them. This is the "C" and the "R" from CRUD:
    creation and reading. The form for doing this will look like this:</p>

<p><img src="images/getting_started/new_article.png" alt="The new article form"></p>

<p>It will look a little basic for now, but that's ok. We'll look at improving the
    styling for it afterwards.</p>
<h4 id="laying-down-the-ground-work">5.1 Laying down the ground work</h4>

<p>Firstly, you need a place within the application to create a new article. A
    great place for that would be at <code>/articles/new</code>. With the route already
    defined, requests can now be made to <code>/articles/new</code> in the application.
    Navigate to <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and you'll see a
    routing
    error:</p>

<p><img src="images/getting_started/routing_error_no_controller.png"
        alt="Another routing error, uninitialized constant ArticlesController"></p>

<p>This error occurs because the route needs to have a controller defined in order
    to serve the request. The solution to this particular problem is simple: create
    a controller called <code>ArticlesController</code>. You can do this by running this
    command:</p>

<div class="code_container">
    <div>
        <div id="highlighter_284386" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ arasu g controller
                                articles</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>If you open up the newly generated <code>app/controllers/articles_controller.rb</code>
    you'll see a fairly empty controller:</p>

<div class="code_container">
    <div>
        <div id="highlighter_593264" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">ArticlesController &lt; ApplicationController</code></div>
                            <div class="line number2 index1 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>A controller is simply a class that is defined to inherit from
    <code>ApplicationController</code>.
    It's inside this class that you'll define methods that will become the actions
    for this controller. These actions will perform CRUD operations on the articles
    within our system.</p>

<div class="note"><p>There are <code>public</code>, <code>private</code> and <code>protected</code> methods in Go,
    but only <code>public</code> methods can be actions for controllers.
    For more details check out <a href="http://www.go-doc.org/docs/ProgrammingGo/">Programming Go</a>.</p></div>
<p>If you refresh <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> now, you'll get a
    new error:</p>

<p><img src="images/getting_started/unknown_action_new_for_articles.png"
        alt="Unknown action new for ArticlesController!"></p>

<p>This error indicates that Arasu cannot find the <code>new</code> action inside the
    <code>ArticlesController</code> that you just generated. This is because when controllers
    are generated in Arasu they are empty by default, unless you tell it
    your wanted actions during the generation process.</p>

<p>To manually define an action inside a controller, all you need to do is to
    define a new method inside the controller.
    Open <code>app/controllers/articles_controller.rb</code> and inside the <code>ArticlesController</code>
    class, define a <code>new</code> method like this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_750681" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go keyword">new</code></div>
                            <div class="line number2 index1 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>With the <code>new</code> method defined in <code>ArticlesController</code>, if you refresh
    <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll see another error:</p>

<p><img src="images/getting_started/template_is_missing_articles_new.png" alt="Template is missing for articles/new">
</p>

<p>You're getting this error now because Arasu expects plain actions like this one
    to have views associated with them to display their information. With no view
    available, Arasu errors out.</p>

<p>In the above image, the bottom line has been truncated. Let's see what the full
    thing looks like:</p>
<blockquote>
    Missing template articles/new, application/new with {locale:[:en], formats:[:html], handlers:[:erb, :builder,
    :coffee]}. Searched in: * "/path/to/blog/app/views"
</blockquote>
<p>That's quite a lot of text! Let's quickly go through and understand what each
    part of it does.</p>

<p>The first part identifies what template is missing. In this case, it's the
    <code>articles/new</code> template. Arasu will first look for this template. If not found,
    then it will attempt to load a template called <code>application/new</code>. It looks for
    one here because the <code>ArticlesController</code> inherits from <code>ApplicationController</code>.</p>

<p>The next part of the message contains a hash. The <code>:locale</code> key in this hash
    simply indicates what spoken language template should be retrieved. By default,
    this is the English - or "en" - template. The next key, <code>:formats</code> specifies the
    format of template to be served in response. The default format is <code>:html</code>, and
    so Arasu is looking for an HTML template. The final key, <code>:handlers</code>, is telling
    us what <em>template handlers</em> could be used to render our template. <code>:erb</code> is most
    commonly used for HTML templates, <code>:builder</code> is used for XML templates, and
    <code>:coffee</code> uses CoffeeScript to build JavaScript templates.</p>

<p>The final part of this message tells us where Arasu has looked for the templates.
    Templates within a basic Arasu application like this are kept in a single
    location, but in more complex applications it could be many different paths.</p>

<p>The simplest template that would work in this case would be one located at
    <code>app/views/articles/new.html.erb</code>. The extension of this file name is key: the
    first extension is the <em>format</em> of the template, and the second extension is the
    <em>handler</em> that will be used. Arasu is attempting to find a template called
    <code>articles/new</code> within <code>app/views</code> for the application. The format for this
    template can only be <code>html</code> and the handler must be one of <code>erb</code>, <code>builder</code> or
    <code>coffee</code>. Because you want to create a new HTML form, you will be using the <code>ERB</code>
    language. Therefore the file should be called <code>articles/new.html.erb</code> and needs
    to be located inside the <code>app/views</code> directory of the application.</p>

<p>Go ahead now and create a new file at <code>app/views/articles/new.html.erb</code> and
    write this content in it:</p>

<div class="code_container">
    <div>
        <div id="highlighter_183665" class="syntaxhighlighter nogutter  xml">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code
                                    class="xml keyword">h1</code><code class="xml plain">&gt;New
                                Article&lt;/</code><code class="xml keyword">h1</code><code class="xml plain">
                                &gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>When you refresh <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll now see
    that the
    page has a title. The route, controller, action and view are now working
    harmoniously! It's time to create the form for a new article.</p>
<h4 id="the-first-form">5.2 The first form</h4>

<p>To create a form within this template, you will use a <em>form
    builder</em>. The primary form builder for Arasu is provided by a helper
    method called <code>form_for</code>. To use this method, add this code into
    <code>app/views/articles/new.html.erb</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_133205" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;%= form_for :article do
                                |f| %&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :title %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :title %&gt;</code>
                            </div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number6 index5 alt1">&nbsp;</div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :text %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :text
                                %&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number11 index10 alt2">&nbsp;</div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number15 index14 alt2"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>If you refresh the page now, you'll see the exact same form as in the example.
    Building forms in Arasu is really just that easy!</p>

<p>When you call <code>form_for</code>, you pass it an identifying object for this
    form. In this case, it's the symbol <code>:article</code>. This tells the <code>form_for</code>
    helper what this form is for. Inside the block for this method, the
    <code>FormBuilder</code> object - represented by <code>f</code> - is used to build two labels and two
    text fields, one each for the title and text of an article. Finally, a call to
    <code>submit</code> on the <code>f</code> object will create a submit button for the form.</p>

<p>There's one problem with this form though. If you inspect the HTML that is
    generated, by viewing the source of the page, you will see that the <code>action</code>
    attribute for the form is pointing at <code>/articles/new</code>. This is a problem because
    this route goes to the very page that you're on right at the moment, and that
    route should only be used to display the form for a new article.</p>

<p>The form needs to use a different URL in order to go somewhere else.
    This can be done quite simply with the <code>:url</code> option of <code>form_for</code>.
    Typically in Arasu, the action that is used for new form submissions
    like this is called "create", and so the form should be pointed to that action.</p>

<p>Edit the <code>form_for</code> line inside <code>app/views/articles/new.html.erb</code> to look like
    this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_904631" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;%= form_for :article,
                                url: articles_path do |f| %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>In this example, the <code>articles_path</code> helper is passed to the <code>:url</code> option.
    To see what Arasu will do with this, we look back at the output of
    <code>rake routes</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_109228" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ rake routes</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">Prefix Verb&nbsp;&nbsp; URI Pattern&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                Controller#Action</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">articles GET&nbsp;&nbsp;&nbsp;
                                /articles(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#index</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">POST&nbsp;&nbsp; /articles(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#create</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;</code><code
                                    class="plain plain">new_article GET&nbsp;&nbsp;&nbsp; /articles/new(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#new</code></div>
                            <div class="line number6 index5 alt1"><code class="plain plain">edit_article GET&nbsp;&nbsp;&nbsp;
                                /articles/:id/edit(.:format) articles#edit</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">article GET&nbsp;&nbsp;&nbsp; /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#show</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">PATCH&nbsp; /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#update</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">PUT&nbsp;&nbsp;&nbsp; /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#update</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">DELETE /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#destroy</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">root GET&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                welcome#index</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>articles_path</code> helper tells Arasu to point the form
    to the URI Pattern associated with the <code>articles</code> prefix; and
    the form will (by default) send a <code>POST</code> request
    to that route. This is associated with the
    <code>create</code> action of the current controller, the <code>ArticlesController</code>.</p>

<p>With the form and its associated route defined, you will be able to fill in the
    form and then click the submit button to begin the process of creating a new
    article, so go ahead and do that. When you submit the form, you should see a
    familiar error:</p>

<p><img src="images/getting_started/unknown_action_create_for_articles.png"
        alt="Unknown action create for ArticlesController"></p>

<p>You now need to create the <code>create</code> action within the <code>ArticlesController</code> for
    this to work.</p>
<h4 id="creating-articles">5.3 Creating articles</h4>

<p>To make the "Unknown action" go away, you can define a <code>create</code> action within
    the <code>ArticlesController</code> class in <code>app/controllers/articles_controller.rb</code>,
    underneath the <code>new</code> action:</p>

<div class="code_container">
    <div>
        <div id="highlighter_73374" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">ArticlesController &lt; ApplicationController</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go keyword">new</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">create</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number7 index6 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>If you re-submit the form now, you'll see another familiar error: a template is
    missing. That's ok, we can ignore that for now. What the <code>create</code> action should
    be doing is saving our new article to the database.</p>

<p>When a form is submitted, the fields of the form are sent to Arasu as
    <em>parameters</em>. These parameters can then be referenced inside the controller
    actions, typically to perform a particular task. To see what these parameters
    look like, change the <code>create</code> action to this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_615551" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">create</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">render plain: params[</code><code
                                    class="go color2">:article</code><code class="go plain">].inspect</code></div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>render</code> method here is taking a very simple hash with a key of <code>text</code> and
    value of <code>params[:article].inspect</code>. The <code>params</code> method is the object which
    represents the parameters (or fields) coming in from the form. The <code>params</code>
    method returns an <code>ActiveSupport::HashWithIndifferentAccess</code> object, which
    allows you to access the keys of the hash using either strings or symbols. In
    this situation, the only parameters that matter are the ones from the form.</p>

<p>If you re-submit the form one more time you'll now no longer get the missing
    template error. Instead, you'll see something that looks like the following:</p>

<div class="code_container">
    <div>
        <div id="highlighter_774671" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go plain">{</code><code
                                    class="go string">"title"</code><code class="go plain">=&gt;</code><code
                                    class="go string">"First article!"</code><code class="go plain">, </code><code
                                    class="go string">"text"</code><code class="go plain">=&gt;</code><code
                                    class="go string">"This is my first article."</code><code
                                    class="go plain">}</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This action is now displaying the parameters for the article that are coming in
    from the form. However, this isn't really all that helpful. Yes, you can see the
    parameters but nothing in particular is being done with them.</p>
<h4 id="creating-the-article-model">5.4 Creating the Article model</h4>

<p>Models in Arasu use a singular name, and their corresponding database tables use
    a plural name. Arasu provides a generator for creating models, which
    most Arasu developers tend to use when creating new models.
    To create the new model, run this command in your terminal:</p>

<div class="code_container">
    <div>
        <div id="highlighter_500962" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ arasu generate model
                                Article title:string text:text</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>With that command we told Arasu that we want a <code>Article</code> model, together
    with a <em>title</em> attribute of type string, and a <em>text</em> attribute
    of type text. Those attributes are automatically added to the <code>articles</code>
    table in the database and mapped to the <code>Article</code> model.</p>

<p>Arasu responded by creating a bunch of files. For
    now, we're only interested in <code>app/models/article.rb</code> and
    <code>db/migrate/20140120191729_create_articles.rb</code> (your name could be a bit
    different). The latter is responsible
    for creating the database structure, which is what we'll look at next.</p>

<div class="info"><p>Active Record is smart enough to automatically map column names to
    model attributes, which means you don't have to declare attributes
    inside Arasu models, as that will be done automatically by Active
    Record.</p></div>
<h4 id="running-a-migration">5.5 Running a Migration</h4>

<p>As we've just seen, <code>arasu generate model</code> created a <em>database
    migration</em> file inside the <code>db/migrate</code> directory.
    Migrations are Go classes that are designed to make it simple to
    create and modify database tables. Arasu uses rake commands to run migrations,
    and it's possible to undo a migration after it's been applied to your database.
    Migration filenames include a timestamp to ensure that they're processed in the
    order that they were created.</p>

<p>If you look in the <code>db/migrate/20140120191729_create_articles.rb</code> file (remember,
    yours will have a slightly different name), here's what you'll find:</p>

<div class="code_container">
    <div>
        <div id="highlighter_281901" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">CreateArticles &lt; ActiveRecord::Migration</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">change</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">create_table </code><code
                                    class="go color2">:articles</code> <code class="go keyword">do</code> <code
                                    class="go plain">|t|</code></div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.string </code><code class="go color2">:title</code></div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.text </code><code class="go color2">:text</code></div>
                            <div class="line number6 index5 alt1">&nbsp;</div>
                            <div class="line number7 index6 alt2"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.timestamps</code></div>
                            <div class="line number8 index7 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go keyword">end</code></div>
                            <div class="line number9 index8 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number10 index9 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The above migration creates a method named <code>change</code> which will be called when
    you run this migration. The action defined in this method is also reversible,
    which means Arasu knows how to reverse the change made by this migration,
    in case you want to reverse it later. When you run this migration it will create
    an <code>articles</code> table with one string column and a text column. It also creates
    two timestamp fields to allow Arasu to track article creation and update times.</p>

<div class="info"><p>For more information about migrations, refer to <a href="migrations.html">Arasu Database
    Migrations</a>.</p></div>
<p>At this point, you can use a rake command to run the migration:</p>

<div class="code_container">
    <div>
        <div id="highlighter_131546" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ rake db:migrate</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Arasu will execute this migration command and tell you it created the Articles
    table.</p>

<div class="code_container">
    <div>
        <div id="highlighter_540208" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">==&nbsp; CreateArticles:
                                migrating ==================================================</code></div>
                            <div class="line number2 index1 alt1"><code class="plain plain">--
                                create_table(:articles)</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;</code><code class="plain plain">-&gt; 0.0019s</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">==&nbsp; CreateArticles:
                                migrated (0.0020s) =========================================</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="note"><p>Because you're working in the development environment by default, this
    command will apply to the database defined in the <code>development</code> section of your
    <code>config/database.yml</code> file. If you would like to execute migrations in another
    environment, for instance in production, you must explicitly pass it when
    invoking the command: <code>rake db:migrate RAILS_ENV=production</code>.</p></div>
<h4 id="saving-data-in-the-controller">5.6 Saving data in the controller</h4>

<p>Back in <code>ArticlesController</code>, we need to change the <code>create</code> action
    to use the new <code>Article</code> model to save the data in the database.
    Open <code>app/controllers/articles_controller.rb</code> and change the <code>create</code> action to
    look like this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_237521" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">create</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.</code><code class="go keyword">new</code><code
                                    class="go plain">(params[</code><code class="go color2">:article</code><code
                                    class="go plain">])</code></div>
                            <div class="line number3 index2 alt2">&nbsp;</div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code><code class="go plain">.save</code>
                            </div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">redirect_to </code><code
                                    class="go variable bold">@article</code></div>
                            <div class="line number6 index5 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Here's what's going on: every Arasu model can be initialized with its
    respective attributes, which are automatically mapped to the respective
    database columns. In the first line we do just that
    (remember that <code>params[:article]</code> contains the attributes we're interested in).
    Then, <code>@article.save</code> is responsible for saving the model in the database.
    Finally, we redirect the user to the <code>show</code> action, which we'll define later.</p>

<div class="info"><p>As we'll see later, <code>@article.save</code> returns a boolean indicating
    whether the article was saved or not.</p></div>
<p>If you now go to
    <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll <em>almost</em> be able
    to create an
    article. Try it! You should get an error that looks like this:</p>

<p><img src="images/getting_started/forbidden_attributes_for_new_article.png"
        alt="Forbidden attributes for new article"></p>

<p>Arasu has several security features that help you write secure applications,
    and you're running into one of them now. This one is called
    <code>strong_parameters</code>, which requires us to tell Arasu exactly which parameters
    we want to accept in our controllers. In this case, we want to allow the
    <code>title</code> and <code>text</code> parameters, so add the new <code>article_params</code> method, and
    change your <code>create</code> controller action to use it, like this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_322709" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">create</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.</code><code class="go keyword">new</code><code class="go plain">(article_params)</code>
                            </div>
                            <div class="line number3 index2 alt2">&nbsp;</div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code><code class="go plain">.save</code>
                            </div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">redirect_to </code><code
                                    class="go variable bold">@article</code></div>
                            <div class="line number6 index5 alt1"><code class="go keyword">end</code></div>
                            <div class="line number7 index6 alt2">&nbsp;</div>
                            <div class="line number8 index7 alt1"><code class="go plain">private</code></div>
                            <div class="line number9 index8 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">article_params</code></div>
                            <div class="line number10 index9 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">params.require(</code><code
                                    class="go color2">:article</code><code class="go plain">).permit(</code><code
                                    class="go color2">:title</code><code class="go plain">, </code><code
                                    class="go color2">:text</code><code class="go plain">)</code></div>
                            <div class="line number11 index10 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>See the <code>permit</code>? It allows us to accept both <code>title</code> and <code>text</code> in this
    action.</p>

<div class="info"><p>Note that <code>def article_params</code> is private. This new approach prevents an
    attacker from setting the model's attributes by manipulating the hash passed to
    the model.
    For more information, refer to
    <a href="http://weblog.goonarasu.org/2012/3/21/strong-parameters/">this blog article about Strong Parameters</a>.
</p></div>
<h4 id="showing-articles">5.7 Showing Articles</h4>

<p>If you submit the form again now, Arasu will complain about not finding
    the <code>show</code> action. That's not very useful though, so let's add the
    <code>show</code> action before proceeding.</p>

<p>As we have seen in the output of <code>rake routes</code>, the route for <code>show</code> action is
    as follows:</p>

<div class="code_container">
    <div>
        <div id="highlighter_911889" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">article GET&nbsp;&nbsp;&nbsp;
                                /articles/:id(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; articles#show</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The special syntax <code>:id</code> tells arasu that this route expects an <code>:id</code>
    parameter, which in our case will be the id of the article.</p>

<p>As we did before, we need to add the <code>show</code> action in
    <code>app/controllers/articles_controller.rb</code> and its respective view.</p>

<div class="code_container">
    <div>
        <div id="highlighter_882224" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">show</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.find(params[</code><code class="go color2">:id</code><code class="go plain">])</code>
                            </div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>A couple of things to note. We use <code>Article.find</code> to find the article we're
    interested in, passing in <code>params[:id]</code> to get the <code>:id</code> parameter from the
    request. We also use an instance variable (prefixed by <code>@</code>) to hold a
    reference to the article object. We do this because Arasu will pass all instance
    variables to the view.</p>

<p>Now, create a new file <code>app/views/articles/show.html.erb</code> with the following
    content:</p>

<div class="code_container">
    <div>
        <div id="highlighter_12930" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Title:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.title %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Text:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.text %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>With this change, you should finally be able to create new articles.
    Visit <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and give it a try!</p>

<p><img src="images/getting_started/show_action_for_articles.png" alt="Show action for articles"></p>
<h4 id="listing-all-articles">5.8 Listing all articles</h4>

<p>We still need a way to list all our articles, so let's do that.
    The route for this as per output of <code>rake routes</code> is:</p>

<div class="code_container">
    <div>
        <div id="highlighter_409805" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">articles GET&nbsp;&nbsp;&nbsp;
                                /articles(.:format)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                articles#index</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Add the corresponding <code>index</code> action for that route inside the
    <code>ArticlesController</code> in the <code>app/controllers/articles_controller.rb</code> file:</p>

<div class="code_container">
    <div>
        <div id="highlighter_96988" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">index</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@articles</code> <code class="go plain">=
                                Article.all</code></div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>And then finally, add view for this action, located at
    <code>app/views/articles/index.html.erb</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_318676" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;h1&gt;Listing articles&lt;/h1&gt;</code>
                            </div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="plain plain">&lt;table&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;tr&gt;</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">
                                &lt;th&gt;Title&lt;/th&gt;</code></div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">
                                &lt;th&gt;Text&lt;/th&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/tr&gt;</code></div>
                            <div class="line number8 index7 alt1">&nbsp;</div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% @articles.each do |article| %&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;tr&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;</code></div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;/tr&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number15 index14 alt2"><code class="plain plain">&lt;/table&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Now if you go to <code>http://localhost:3000/articles</code> you will see a list of all the
    articles that you have created.</p>
<h4 id="adding-links">5.9 Adding links</h4>

<p>You can now create, show, and list articles. Now let's add some links to
    navigate through pages.</p>

<p>Open <code>app/views/welcome/index.html.erb</code> and modify it as follows:</p>

<div class="code_container">
    <div>
        <div id="highlighter_984378" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;h1&gt;Hello, Arasu!&lt;/h1&gt;</code>
                            </div>
                            <div class="line number2 index1 alt1"><code class="plain plain">&lt;%= link_to 'My Blog',
                                controller: 'articles' %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>link_to</code> method is one of Arasu' built-in view helpers. It creates a
    hyperlink based on text to display and where to go - in this case, to the path
    for articles.</p>

<p>Let's add links to the other views as well, starting with adding this
    "New Article" link to <code>app/views/articles/index.html.erb</code>, placing it above the
    <code>&lt;table&gt;</code> tag:</p>

<div class="code_container">
    <div>
        <div id="highlighter_573227" class="syntaxhighlighter nogutter  htmlscript">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go script">&lt;%=</code> <code
                                    class="go plain">link_to </code><code class="go string">'New
                                article'</code><code class="go plain">, new_article_path </code><code
                                    class="go script">%&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This link will allow you to bring up the form that lets you create a new article.</p>

<p>Also add a link in <code>app/views/articles/new.html.erb</code>, underneath the form, to
    go back to the <code>index</code> action:</p>

<div class="code_container">
    <div>
        <div id="highlighter_571315" class="syntaxhighlighter nogutter  htmlscript">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go script">&lt;%=</code> <code
                                    class="go plain">form_for </code><code class="go color2">:article</code><code
                                    class="go plain">, url: articles_path </code><code class="go keyword">do</code>
                                <code class="go plain">|f| </code><code class="go script">%&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="htmlscript spaces">
                                &nbsp;&nbsp;</code><code class="go plain">...</code></div>
                            <div class="line number3 index2 alt2"><code class="go script">&lt;%</code> <code
                                    class="go keyword">end</code> <code class="go script">%&gt;</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go script">&lt;%=</code> <code
                                    class="go plain">link_to </code><code class="go string">'Back'</code><code
                                    class="go plain">, articles_path </code><code class="go script">%&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Finally, add another link to the <code>app/views/articles/show.html.erb</code> template to
    go back to the <code>index</code> action as well, so that people who are viewing a single
    article can go back and view the whole list again:</p>

<div class="code_container">
    <div>
        <div id="highlighter_603692" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Title:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.title %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Text:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.text %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="info"><p>If you want to link to an action in the same controller, you don't
    need to specify the <code>:controller</code> option, as Arasu will use the current
    controller by default.</p></div>
<div class="info"><p>In development mode (which is what you're working in by default), Arasu
    reloads your application with every browser request, so there's no need to stop
    and restart the web server when a change is made.</p></div>
<h4 id="adding-some-validation">5.10 Adding Some Validation</h4>

<p>The model file, <code>app/models/article.rb</code> is about as simple as it can get:</p>

<div class="code_container">
    <div>
        <div id="highlighter_267372" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">Article &lt; ActiveRecord::Base</code></div>
                            <div class="line number2 index1 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>There isn't much to this file - but note that the <code>Article</code> class inherits from
    <code>ActiveRecord::Base</code>. Active Record supplies a great deal of functionality to
    your Arasu models for free, including basic database CRUD (Create, Read, Update,
    Destroy) operations, data validation, as well as sophisticated search support
    and the ability to relate multiple models to one another.</p>

<p>Arasu includes methods to help you validate the data that you send to models.
    Open the <code>app/models/article.rb</code> file and edit it:</p>

<div class="code_container">
    <div>
        <div id="highlighter_719873" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">Article &lt; ActiveRecord::Base</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">validates </code><code class="go color2">:title</code><code
                                    class="go plain">, presence: </code><code class="go keyword">true</code><code
                                    class="go plain">,</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">length: { minimum: </code><code class="go constants">5</code>
                                <code class="go plain">}</code></div>
                            <div class="line number4 index3 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>These changes will ensure that all articles have a title that is at least five
    characters long. Arasu can validate a variety of conditions in a model,
    including the presence or uniqueness of columns, their format, and the
    existence of associated objects. Validations are covered in detail in <a href="active_record_validations.html">Active
        Record Validations</a></p>

<p>With the validation now in place, when you call <code>@article.save</code> on an invalid
    article, it will return <code>false</code>. If you open
    <code>app/controllers/articles_controller.rb</code> again, you'll notice that we don't
    check the result of calling <code>@article.save</code> inside the <code>create</code> action.
    If <code>@article.save</code> fails in this situation, we need to show the form back to the
    user. To do this, change the <code>new</code> and <code>create</code> actions inside
    <code>app/controllers/articles_controller.rb</code> to these:</p>

<div class="code_container">
    <div>
        <div id="highlighter_147446" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go keyword">new</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.</code><code class="go keyword">new</code></div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">create</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.</code><code class="go keyword">new</code><code class="go plain">(article_params)</code>
                            </div>
                            <div class="line number7 index6 alt2">&nbsp;</div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">if</code> <code class="go variable bold">@article</code><code
                                    class="go plain">.save</code></div>
                            <div class="line number9 index8 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">redirect_to </code><code
                                    class="go variable bold">@article</code></div>
                            <div class="line number10 index9 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">else</code></div>
                            <div class="line number11 index10 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">render </code><code
                                    class="go string">'new'</code></div>
                            <div class="line number12 index11 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number13 index12 alt2"><code class="go keyword">end</code></div>
                            <div class="line number14 index13 alt1">&nbsp;</div>
                            <div class="line number15 index14 alt2"><code class="go plain">private</code></div>
                            <div class="line number16 index15 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">article_params</code></div>
                            <div class="line number17 index16 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">params.require(</code><code
                                    class="go color2">:article</code><code class="go plain">).permit(</code><code
                                    class="go color2">:title</code><code class="go plain">, </code><code
                                    class="go color2">:text</code><code class="go plain">)</code></div>
                            <div class="line number18 index17 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>new</code> action is now creating a new instance variable called <code>@article</code>, and
    you'll see why that is in just a few moments.</p>

<p>Notice that inside the <code>create</code> action we use <code>render</code> instead of <code>redirect_to</code>
    when <code>save</code> returns <code>false</code>. The <code>render</code> method is used so that the
    <code>@article</code>
    object is passed back to the <code>new</code> template when it is rendered. This rendering
    is done within the same request as the form submission, whereas the
    <code>redirect_to</code> will tell the browser to issue another request.</p>

<p>If you reload
    <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and
    try to save an article without a title, Arasu will send you back to the
    form, but that's not very useful. You need to tell the user that
    something went wrong. To do that, you'll modify
    <code>app/views/articles/new.html.erb</code> to check for error messages:</p>

<div class="code_container">
    <div>
        <div id="highlighter_196789" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;%= form_for :article,
                                url: articles_path do |f| %&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% if @article.errors.any? %&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;div id="error_explanation"&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;h2&gt;&lt;%=
                                pluralize(@article.errors.count, "error") %&gt; prohibited</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">this article from being saved:&lt;/h2&gt;</code></div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;ul&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%
                                @article.errors.full_messages.each do |msg| %&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;/ul&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/div&gt;</code></div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :title %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number15 index14 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :title %&gt;</code>
                            </div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number17 index16 alt2">&nbsp;</div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number19 index18 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :text %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number20 index19 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :text
                                %&gt;</code></div>
                            <div class="line number21 index20 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number22 index21 alt1">&nbsp;</div>
                            <div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number24 index23 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number25 index24 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number26 index25 alt1"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number27 index26 alt2">&nbsp;</div>
                            <div class="line number28 index27 alt1"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>A few things are going on. We check if there are any errors with
    <code>@article.errors.any?</code>, and in that case we show a list of all
    errors with <code>@article.errors.full_messages</code>.</p>

<p><code>pluralize</code> is a arasu helper that takes a number and a string as its
    arguments. If the number is greater than one, the string will be automatically
    pluralized.</p>

<p>The reason why we added <code>@article = Article.new</code> in the <code>ArticlesController</code> is
    that otherwise <code>@article</code> would be <code>nil</code> in our view, and calling
    <code>@article.errors.any?</code> would throw an error.</p>

<div class="info"><p>Arasu automatically wraps fields that contain an error with a div
    with class <code>field_with_errors</code>. You can define a css rule to make them
    standout.</p></div>
<p>Now you'll get a nice error message when saving an article without title when
    you attempt to do just that on the new article form
    <a href="http://localhost:3000/articles/new">(http://localhost:3000/articles/new)</a>.</p>

<p><img src="images/getting_started/form_with_errors.png" alt="Form With Errors"></p>
<h4 id="updating-articles">5.11 Updating Articles</h4>

<p>We've covered the "CR" part of CRUD. Now let's focus on the "U" part, updating
    articles.</p>

<p>The first step we'll take is adding an <code>edit</code> action to the <code>ArticlesController</code>.</p>

<div class="code_container">
    <div>
        <div id="highlighter_753524" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">edit</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.find(params[</code><code class="go color2">:id</code><code class="go plain">])</code>
                            </div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The view will contain a form similar to the one we used when creating
    new articles. Create a file called <code>app/views/articles/edit.html.erb</code> and make
    it look as follows:</p>

<div class="code_container">
    <div>
        <div id="highlighter_934345" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;h1&gt;Editing article&lt;/h1&gt;</code>
                            </div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="plain plain">&lt;%= form_for :article,
                                url: article_path(@article), method: :patch do |f| %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% if @article.errors.any? %&gt;</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;div id="error_explanation"&gt;</code></div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;h2&gt;&lt;%=
                                pluralize(@article.errors.count, "error") %&gt; prohibited</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">this article from being saved:&lt;/h2&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;ul&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%
                                @article.errors.full_messages.each do |msg| %&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;/ul&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/div&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number15 index14 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :title %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number17 index16 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :title %&gt;</code>
                            </div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number19 index18 alt2">&nbsp;</div>
                            <div class="line number20 index19 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number21 index20 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :text %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number22 index21 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :text
                                %&gt;</code></div>
                            <div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number24 index23 alt1">&nbsp;</div>
                            <div class="line number25 index24 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number26 index25 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number27 index26 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number28 index27 alt1"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number29 index28 alt2">&nbsp;</div>
                            <div class="line number30 index29 alt1"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This time we point the form to the <code>update</code> action, which is not defined yet
    but will be very soon.</p>

<p>The <code>method: :patch</code> option tells Arasu that we want this form to be submitted
    via the <code>PATCH</code> HTTP method which is the HTTP method you're expected to use to
    <strong>update</strong> resources according to the REST protocol.</p>

<p>The first parameter of the <code>form_tag</code> can be an object, say, <code>@article</code> which would
    cause the helper to fill in the form with the fields of the object. Passing in a
    symbol (<code>:article</code>) with the same name as the instance variable (<code>@article</code>) also
    automagically leads to the same behavior. This is what is happening here. More details
    can be found in <a href="http://api.goonarasu.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for">form_for
        documentation</a>.</p>

<p>Next we need to create the <code>update</code> action in
    <code>app/controllers/articles_controller.rb</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_431060" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">update</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.find(params[</code><code class="go color2">:id</code><code class="go plain">])</code>
                            </div>
                            <div class="line number3 index2 alt2">&nbsp;</div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">if</code> <code class="go variable bold">@article</code><code
                                    class="go plain">.update(article_params)</code></div>
                            <div class="line number5 index4 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">redirect_to </code><code
                                    class="go variable bold">@article</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">else</code></div>
                            <div class="line number7 index6 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">render </code><code
                                    class="go string">'edit'</code></div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number9 index8 alt2"><code class="go keyword">end</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="go plain">private</code></div>
                            <div class="line number12 index11 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">article_params</code></div>
                            <div class="line number13 index12 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">params.require(</code><code
                                    class="go color2">:article</code><code class="go plain">).permit(</code><code
                                    class="go color2">:title</code><code class="go plain">, </code><code
                                    class="go color2">:text</code><code class="go plain">)</code></div>
                            <div class="line number14 index13 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The new method, <code>update</code>, is used when you want to update a record
    that already exists, and it accepts a hash containing the attributes
    that you want to update. As before, if there was an error updating the
    article we want to show the form back to the user.</p>

<p>We reuse the <code>article_params</code> method that we defined earlier for the create
    action.</p>

<div class="info"><p>You don't need to pass all attributes to <code>update</code>. For
    example, if you'd call <code>@article.update(title: 'A new title')</code>
    Arasu would only update the <code>title</code> attribute, leaving all other
    attributes untouched.</p></div>
<p>Finally, we want to show a link to the <code>edit</code> action in the list of all the
    articles, so let's add that now to <code>app/views/articles/index.html.erb</code> to make
    it appear next to the "Show" link:</p>

<div class="code_container">
    <div>
        <div id="highlighter_755524" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;table&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;tr&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">
                                &lt;th&gt;Title&lt;/th&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">
                                &lt;th&gt;Text&lt;/th&gt;</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;th colspan="2"&gt;&lt;/th&gt;</code>
                            </div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/tr&gt;</code></div>
                            <div class="line number7 index6 alt2">&nbsp;</div>
                            <div class="line number8 index7 alt1"><code class="plain plain">&lt;% @articles.each do
                                |article| %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;tr&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= article.title
                                %&gt;&lt;/td&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;</code>
                            </div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= link_to
                                'Show', article_path(article) %&gt;&lt;/td&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= link_to
                                'Edit', edit_article_path(article) %&gt;&lt;/td&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/tr&gt;</code></div>
                            <div class="line number15 index14 alt2"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number16 index15 alt1"><code class="plain plain">&lt;/table&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>And we'll also add one to the <code>app/views/articles/show.html.erb</code> template as
    well, so that there's also an "Edit" link on an article's page. Add this at the
    bottom of the template:</p>

<div class="code_container">
    <div>
        <div id="highlighter_804422" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">...</code></div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">| &lt;%= link_to 'Edit',
                                edit_article_path(@article) %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>And here's how our app looks so far:</p>

<p><img src="images/getting_started/index_action_with_edit_link.png" alt="Index action with edit link"></p>
<h4 id="using-partials-to-clean-up-duplication-in-views">5.12 Using partials to clean up duplication in views</h4>

<p>Our <code>edit</code> page looks very similar to the <code>new</code> page, in fact they
    both share the same code for displaying the form. Let's remove some duplication
    by using a view partial. By convention, partial files are prefixed by an
    underscore.</p>

<div class="info"><p>You can read more about partials in the
    <a href="layouts_and_rendering.html">Layouts and Rendering in Arasu</a> guide.</p></div>
<p>Create a new file <code>app/views/articles/_form.html.erb</code> with the following
    content:</p>

<div class="code_container">
    <div>
        <div id="highlighter_246511" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;%= form_for @article do
                                |f| %&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% if @article.errors.any? %&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;div id="error_explanation"&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;h2&gt;&lt;%=
                                pluralize(@article.errors.count, "error") %&gt; prohibited</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">this article from being saved:&lt;/h2&gt;</code></div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;ul&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%
                                @article.errors.full_messages.each do |msg| %&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;/ul&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/div&gt;</code></div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;% end %&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :title %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number15 index14 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :title %&gt;</code>
                            </div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number17 index16 alt2">&nbsp;</div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number19 index18 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :text %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number20 index19 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :text
                                %&gt;</code></div>
                            <div class="line number21 index20 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number22 index21 alt1">&nbsp;</div>
                            <div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number24 index23 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number25 index24 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number26 index25 alt1"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Everything except for the <code>form_for</code> declaration remained the same.
    The reason we can use this shorter, simpler <code>form_for</code> declaration
    to stand in for either of the other forms is that <code>@article</code> is a <em>resource</em>
    corresponding to a full set of RESTful routes, and Arasu is able to infer
    which URI and method to use.
    For more information about this use of <code>form_for</code>, see
    <a href="//api.goonarasu.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for-label-Resource-oriented+style">Resource-oriented
        style</a>.</p>

<p>Now, let's update the <code>app/views/articles/new.html.erb</code> view to use this new
    partial, rewriting it completely:</p>

<div class="code_container">
    <div>
        <div id="highlighter_623628" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;h1&gt;New article&lt;/h1&gt;</code>
                            </div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="plain plain">&lt;%= render 'form'
                                %&gt;</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Then do the same for the <code>app/views/articles/edit.html.erb</code> view:</p>

<div class="code_container">
    <div>
        <div id="highlighter_599582" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;h1&gt;Edit article&lt;/h1&gt;</code>
                            </div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="plain plain">&lt;%= render 'form'
                                %&gt;</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<h4 id="deleting-articles">5.13 Deleting Articles</h4>

<p>We're now ready to cover the "D" part of CRUD, deleting articles from the
    database. Following the REST convention, the route for
    deleting articles as per output of <code>rake routes</code> is:</p>

<div class="code_container">
    <div>
        <div id="highlighter_278344" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go constants">DELETE</code> <code
                                    class="go plain">/articles/</code><code class="go color2">:id</code><code
                                    class="go plain">(.</code><code class="go color2">:format</code><code
                                    class="go plain">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; articles</code><code
                                    class="go comments">#destroy</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>delete</code> routing method should be used for routes that destroy
    resources. If this was left as a typical <code>get</code> route, it could be possible for
    people to craft malicious URLs like this:</p>

<div class="code_container">
    <div>
        <div id="highlighter_193083" class="syntaxhighlighter nogutter  xml">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code
                                    class="xml keyword">a</code> <code class="xml color1">href</code><code
                                    class="xml plain">=</code><code class="xml string">'<a
                                    href="http://example.com/articles/1/destroy">http://example.com/articles/1/destroy</a>'</code><code
                                    class="xml plain">&gt;look at this cat!&lt;/</code><code
                                    class="xml keyword">a</code><code class="xml plain">&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>We use the <code>delete</code> method for destroying resources, and this route is mapped to
    the <code>destroy</code> action inside <code>app/controllers/articles_controller.rb</code>, which
    doesn't exist yet, but is provided below:</p>

<div class="code_container">
    <div>
        <div id="highlighter_35824" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">def</code> <code
                                    class="go plain">destroy</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code> <code class="go plain">=
                                Article.find(params[</code><code class="go color2">:id</code><code class="go plain">])</code>
                            </div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go variable bold">@article</code><code class="go plain">.destroy</code>
                            </div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">redirect_to articles_path</code></div>
                            <div class="line number6 index5 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>You can call <code>destroy</code> on Active Record objects when you want to delete
    them from the database. Note that we don't need to add a view for this
    action since we're redirecting to the <code>index</code> action.</p>

<p>Finally, add a 'Destroy' link to your <code>index</code> action template
    (<code>app/views/articles/index.html.erb</code>) to wrap everything
    together.</p>

<div class="code_container">
    <div>
        <div id="highlighter_453427" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;h1&gt;Listing Articles&lt;/h1&gt;</code>
                            </div>
                            <div class="line number2 index1 alt1"><code class="plain plain">&lt;%= link_to 'New
                                article', new_article_path %&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain plain">&lt;table&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;tr&gt;</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">
                                &lt;th&gt;Title&lt;/th&gt;</code></div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">
                                &lt;th&gt;Text&lt;/th&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;th colspan="3"&gt;&lt;/th&gt;</code>
                            </div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/tr&gt;</code></div>
                            <div class="line number9 index8 alt2">&nbsp;</div>
                            <div class="line number10 index9 alt1"><code class="plain plain">&lt;% @articles.each do
                                |article| %&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;tr&gt;</code></div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= article.title
                                %&gt;&lt;/td&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;</code>
                            </div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= link_to
                                'Show', article_path(article) %&gt;&lt;/td&gt;</code></div>
                            <div class="line number15 index14 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= link_to
                                'Edit', edit_article_path(article) %&gt;&lt;/td&gt;</code></div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;td&gt;&lt;%= link_to
                                'Destroy', article_path(article),</code></div>
                            <div class="line number17 index16 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;</code>
                            </div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/tr&gt;</code></div>
                            <div class="line number19 index18 alt2"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number20 index19 alt1"><code class="plain plain">&lt;/table&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Here we're using <code>link_to</code> in a different way. We pass the named route as the
    second argument, and then the options as another argument. The <code>:method</code> and
    <code>:'data-confirm'</code> options are used as HTML5 attributes so that when the link is
    clicked, Arasu will first show a confirm dialog to the user, and then submit the
    link with method <code>delete</code>. This is done via the JavaScript file <code>jquery_ujs</code>
    which is automatically included into your application's layout
    (<code>app/views/layouts/application.html.erb</code>) when you generated the application.
    Without this file, the confirmation dialog box wouldn't appear.</p>

<p><img src="images/getting_started/confirm_dialog.png" alt="Confirm Dialog"></p>

<p>Congratulations, you can now create, show, list, update and destroy
    articles.</p>

<div class="info"><p>In general, Arasu encourages the use of resources objects in place
    of declaring routes manually.
    For more information about routing, see
    <a href="routing.html">Arasu Routing from the Outside In</a>.</p></div>
<h3 id="adding-a-second-model">6 Adding a Second Model</h3>

<p>It's time to add a second model to the application. The second model will handle
    comments on articles.</p>
<h4 id="generating-a-model">6.1 Generating a Model</h4>

<p>We're going to see the same generator that we used before when creating
    the <code>Article</code> model. This time we'll create a <code>Comment</code> model to hold
    reference of article comments. Run this command in your terminal:</p>

<div class="code_container">
    <div>
        <div id="highlighter_260761" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ arasu generate model
                                Comment commenter:string body:text article:references</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This command will generate four files:</p>
<table class="responsive">
    <thead>
    <tr>
        <th>File</th>
        <th>Purpose</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>db/migrate/20140120201010_create_comments.rb</td>
        <td>Migration to create the comments table in your database (your name will include a different timestamp)</td>
    </tr>
    <tr>
        <td>app/models/comment.rb</td>
        <td>The Comment model</td>
    </tr>
    <tr>
        <td>test/models/comment_test.rb</td>
        <td>Testing harness for the comments model</td>
    </tr>
    <tr>
        <td>test/fixtures/comments.yml</td>
        <td>Sample comments for use in testing</td>
    </tr>
    </tbody>
</table>
<p>First, take a look at <code>app/models/comment.rb</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_947247" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">Comment &lt; ActiveRecord::Base</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">belongs_to </code><code class="go color2">:article</code></div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This is very similar to the <code>Article</code> model that you saw earlier. The difference
    is the line <code>belongs_to :article</code>, which sets up an Active Record <em>association</em>.
    You'll learn a little about associations in the next section of this guide.</p>

<p>In addition to the model, Arasu has also made a migration to create the
    corresponding database table:</p>

<div class="code_container">
    <div>
        <div id="highlighter_899821" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">CreateComments &lt; ActiveRecord::Migration</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">change</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">create_table </code><code
                                    class="go color2">:comments</code> <code class="go keyword">do</code> <code
                                    class="go plain">|t|</code></div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.string </code><code class="go color2">:commenter</code></div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.text </code><code class="go color2">:body</code></div>
                            <div class="line number6 index5 alt1">&nbsp;</div>
                            <div class="line number7 index6 alt2"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go comments"># this line adds an integer column called `article_id`.</code>
                            </div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.references </code><code
                                    class="go color2">:article</code><code class="go plain">, index: </code><code
                                    class="go keyword">true</code></div>
                            <div class="line number9 index8 alt2">&nbsp;</div>
                            <div class="line number10 index9 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">t.timestamps</code></div>
                            <div class="line number11 index10 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go keyword">end</code></div>
                            <div class="line number12 index11 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number13 index12 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>t.references</code> line sets up a foreign key column for the association between
    the two models. An index for this association is also created on this column.
    Go ahead and run the migration:</p>

<div class="code_container">
    <div>
        <div id="highlighter_506694" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ rake db:migrate</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Arasu is smart enough to only execute the migrations that have not already been
    run against the current database, so in this case you will just see:</p>

<div class="code_container">
    <div>
        <div id="highlighter_875739" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">==&nbsp; CreateComments:
                                migrating =================================================</code></div>
                            <div class="line number2 index1 alt1"><code class="plain plain">--
                                create_table(:comments)</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;</code><code class="plain plain">-&gt; 0.0115s</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">==&nbsp; CreateComments:
                                migrated (0.0119s) ========================================</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<h4 id="associating-models">6.2 Associating Models</h4>

<p>Active Record associations let you easily declare the relationship between two
    models. In the case of comments and articles, you could write out the
    relationships this way:</p>
<ul>
    <li>Each comment belongs to one article.</li>
    <li>One article can have many comments.</li>
</ul>
<p>In fact, this is very close to the syntax that Arasu uses to declare this
    association. You've already seen the line of code inside the <code>Comment</code> model
    (app/models/comment.rb) that makes each comment belong to an Article:</p>

<div class="code_container">
    <div>
        <div id="highlighter_399821" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">Comment &lt; ActiveRecord::Base</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">belongs_to </code><code class="go color2">:article</code></div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>You'll need to edit <code>app/models/article.rb</code> to add the other side of the
    association:</p>

<div class="code_container">
    <div>
        <div id="highlighter_986763" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">Article &lt; ActiveRecord::Base</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">has_many </code><code class="go color2">:comments</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">validates </code><code class="go color2">:title</code><code
                                    class="go plain">, presence: </code><code class="go keyword">true</code><code
                                    class="go plain">,</code></div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">length: { minimum: </code><code class="go constants">5</code>
                                <code class="go plain">}</code></div>
                            <div class="line number5 index4 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>These two declarations enable a good bit of automatic behavior. For example, if
    you have an instance variable <code>@article</code> containing an article, you can retrieve
    all the comments belonging to that article as an array using
    <code>@article.comments</code>.</p>

<div class="info"><p>For more information on Active Record associations, see the <a href="association_basics.html">Active
    Record
    Associations</a> guide.</p></div>
<h4 id="adding-a-route-for-comments">6.3 Adding a Route for Comments</h4>

<p>As with the <code>welcome</code> controller, we will need to add a route so that Arasu
    knows where we would like to navigate to see <code>comments</code>. Open up the
    <code>config/routes.rb</code> file again, and edit it as follows:</p>

<div class="code_container">
    <div>
        <div id="highlighter_92371" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go plain">resources </code><code
                                    class="go color2">:articles</code> <code class="go keyword">do</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">resources </code><code class="go color2">:comments</code></div>
                            <div class="line number3 index2 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This creates <code>comments</code> as a <em>nested resource</em> within <code>articles</code>. This is
    another part of capturing the hierarchical relationship that exists between
    articles and comments.</p>

<div class="info"><p>For more information on routing, see the <a href="routing.html">Arasu Routing</a>
    guide.</p></div>
<h4 id="generating-a-controller">6.4 Generating a Controller</h4>

<p>With the model in hand, you can turn your attention to creating a matching
    controller. Again, we'll use the same generator we used before:</p>

<div class="code_container">
    <div>
        <div id="highlighter_995924" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">$ arasu generate controller
                                Comments</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This creates six files and one empty directory:</p>
<table class="responsive">
    <thead>
    <tr>
        <th>File/Directory</th>
        <th>Purpose</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>app/controllers/comments_controller.rb</td>
        <td>The Comments controller</td>
    </tr>
    <tr>
        <td>app/views/comments/</td>
        <td>Views of the controller are stored here</td>
    </tr>
    <tr>
        <td>test/controllers/comments_controller_test.rb</td>
        <td>The test for the controller</td>
    </tr>
    <tr>
        <td>app/helpers/comments_helper.rb</td>
        <td>A view helper file</td>
    </tr>
    <tr>
        <td>test/helpers/comments_helper_test.rb</td>
        <td>The test for the helper</td>
    </tr>
    <tr>
        <td>app/assets/javascripts/comment.js.coffee</td>
        <td>CoffeeScript for the controller</td>
    </tr>
    <tr>
        <td>app/assets/stylesheets/comment.css.scss</td>
        <td>Cascading style sheet for the controller</td>
    </tr>
    </tbody>
</table>
<p>Like with any blog, our readers will create their comments directly after
    reading the article, and once they have added their comment, will be sent back
    to the article show page to see their comment now listed. Due to this, our
    <code>CommentsController</code> is there to provide a method to create comments and delete
    spam comments when they arrive.</p>

<p>So first, we'll wire up the Article show template
    (<code>app/views/articles/show.html.erb</code>) to let us make a new comment:</p>

<div class="code_container">
    <div>
        <div id="highlighter_300959" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Title:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.title %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Text:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.text %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="plain plain">&lt;h2&gt;Add a comment:&lt;/h2&gt;</code>
                            </div>
                            <div class="line number12 index11 alt1"><code class="plain plain">&lt;%= form_for([@article,
                                @article.comments.build]) do |f| %&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :commenter %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number15 index14 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :commenter
                                %&gt;</code></div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number17 index16 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :body %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number19 index18 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :body
                                %&gt;</code></div>
                            <div class="line number20 index19 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number21 index20 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number22 index21 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number24 index23 alt1"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number25 index24 alt2">&nbsp;</div>
                            <div class="line number26 index25 alt1"><code class="plain plain">&lt;%= link_to 'Back',
                                articles_path %&gt;</code></div>
                            <div class="line number27 index26 alt2"><code class="plain plain">| &lt;%= link_to 'Edit',
                                edit_article_path(@article) %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This adds a form on the <code>Article</code> show page that creates a new comment by
    calling the <code>CommentsController</code> <code>create</code> action. The <code>form_for</code> call here uses
    an array, which will build a nested route, such as <code>/articles/1/comments</code>.</p>

<p>Let's wire up the <code>create</code> in <code>app/controllers/comments_controller.rb</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_520529" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">CommentsController &lt; ApplicationController</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">create</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@article</code> <code
                                    class="go plain">= Article.find(params[</code><code class="go color2">:article_id</code><code
                                    class="go plain">])</code></div>
                            <div class="line number4 index3 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@comment</code> <code
                                    class="go plain">= </code><code class="go variable bold">@article</code><code
                                    class="go plain">.comments.create(comment_params)</code></div>
                            <div class="line number5 index4 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">redirect_to article_path(</code><code
                                    class="go variable bold">@article</code><code class="go plain">)</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number7 index6 alt2">&nbsp;</div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">private</code></div>
                            <div class="line number9 index8 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go keyword">def</code> <code
                                    class="go plain">comment_params</code></div>
                            <div class="line number10 index9 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">params.require(</code><code
                                    class="go color2">:comment</code><code class="go plain">).permit(</code><code
                                    class="go color2">:commenter</code><code class="go plain">, </code><code
                                    class="go color2">:body</code><code class="go plain">)</code></div>
                            <div class="line number11 index10 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go keyword">end</code></div>
                            <div class="line number12 index11 alt1"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>You'll see a bit more complexity here than you did in the controller for
    articles. That's a side-effect of the nesting that you've set up. Each request
    for a comment has to keep track of the article to which the comment is attached,
    thus the initial call to the <code>find</code> method of the <code>Article</code> model to get the
    article in question.</p>

<p>In addition, the code takes advantage of some of the methods available for an
    association. We use the <code>create</code> method on <code>@article.comments</code> to create and
    save the comment. This will automatically link the comment so that it belongs to
    that particular article.</p>

<p>Once we have made the new comment, we send the user back to the original article
    using the <code>article_path(@article)</code> helper. As we have already seen, this calls
    the <code>show</code> action of the <code>ArticlesController</code> which in turn renders the
    <code>show.html.erb</code> template. This is where we want the comment to show, so let's
    add that to the <code>app/views/articles/show.html.erb</code>.</p>

<div class="code_container">
    <div>
        <div id="highlighter_601999" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Title:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.title %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Text:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.text %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="plain plain">&lt;h2&gt;Comments&lt;/h2&gt;</code>
                            </div>
                            <div class="line number12 index11 alt1"><code class="plain plain">&lt;%
                                @article.comments.each do |comment| %&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;strong&gt;Commenter:&lt;/strong&gt;</code>
                            </div>
                            <div class="line number15 index14 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= comment.commenter
                                %&gt;</code></div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number17 index16 alt2">&nbsp;</div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number19 index18 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;strong&gt;Comment:&lt;/strong&gt;</code>
                            </div>
                            <div class="line number20 index19 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= comment.body
                                %&gt;</code></div>
                            <div class="line number21 index20 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number22 index21 alt1"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number23 index22 alt2">&nbsp;</div>
                            <div class="line number24 index23 alt1"><code class="plain plain">&lt;h2&gt;Add a comment:&lt;/h2&gt;</code>
                            </div>
                            <div class="line number25 index24 alt2"><code class="plain plain">&lt;%= form_for([@article,
                                @article.comments.build]) do |f| %&gt;</code></div>
                            <div class="line number26 index25 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number27 index26 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :commenter %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number28 index27 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :commenter
                                %&gt;</code></div>
                            <div class="line number29 index28 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number30 index29 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number31 index30 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :body %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number32 index31 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :body
                                %&gt;</code></div>
                            <div class="line number33 index32 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number34 index33 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number35 index34 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number36 index35 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number37 index36 alt2"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number38 index37 alt1">&nbsp;</div>
                            <div class="line number39 index38 alt2"><code class="plain plain">&lt;%= link_to 'Edit
                                Article', edit_article_path(@article) %&gt; |</code></div>
                            <div class="line number40 index39 alt1"><code class="plain plain">&lt;%= link_to 'Back to
                                Articles', articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Now you can add articles and comments to your blog and have them show up in the
    right places.</p>

<p><img src="images/getting_started/article_with_comments.png" alt="Article with Comments"></p>

<h3 id="refactoring">7 Refactoring</h3>

<p>Now that we have articles and comments working, take a look at the
    <code>app/views/articles/show.html.erb</code> template. It is getting long and awkward. We
    can use partials to clean it up.</p>
<h4 id="rendering-partial-collections">7.1 Rendering Partial Collections</h4>

<p>First, we will make a comment partial to extract showing all the comments for
    the article. Create the file <code>app/views/comments/_comment.html.erb</code> and put the
    following into it:</p>

<div class="code_container">
    <div>
        <div id="highlighter_303765" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Commenter:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= comment.commenter %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Comment:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= comment.body %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Then you can change <code>app/views/articles/show.html.erb</code> to look like the
    following:</p>

<div class="code_container">
    <div>
        <div id="highlighter_714284" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Title:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.title %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Text:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.text %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="plain plain">&lt;h2&gt;Comments&lt;/h2&gt;</code>
                            </div>
                            <div class="line number12 index11 alt1"><code class="plain plain">&lt;%= render
                                @article.comments %&gt;</code></div>
                            <div class="line number13 index12 alt2">&nbsp;</div>
                            <div class="line number14 index13 alt1"><code class="plain plain">&lt;h2&gt;Add a comment:&lt;/h2&gt;</code>
                            </div>
                            <div class="line number15 index14 alt2"><code class="plain plain">&lt;%= form_for([@article,
                                @article.comments.build]) do |f| %&gt;</code></div>
                            <div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number17 index16 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :commenter %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number18 index17 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :commenter
                                %&gt;</code></div>
                            <div class="line number19 index18 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number20 index19 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number21 index20 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :body %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number22 index21 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :body
                                %&gt;</code></div>
                            <div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number24 index23 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number25 index24 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number26 index25 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number27 index26 alt2"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                            <div class="line number28 index27 alt1">&nbsp;</div>
                            <div class="line number29 index28 alt2"><code class="plain plain">&lt;%= link_to 'Edit
                                Article', edit_article_path(@article) %&gt; |</code></div>
                            <div class="line number30 index29 alt1"><code class="plain plain">&lt;%= link_to 'Back to
                                Articles', articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>This will now render the partial in <code>app/views/comments/_comment.html.erb</code> once
    for each comment that is in the <code>@article.comments</code> collection. As the <code>render</code>
    method iterates over the <code>@article.comments</code> collection, it assigns each
    comment to a local variable named the same as the partial, in this case
    <code>comment</code> which is then available in the partial for us to show.</p>
<h4 id="rendering-a-partial-form">7.2 Rendering a Partial Form</h4>

<p>Let us also move that new comment section out to its own partial. Again, you
    create a file <code>app/views/comments/_form.html.erb</code> containing:</p>

<div class="code_container">
    <div>
        <div id="highlighter_108051" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;%= form_for([@article,
                                @article.comments.build]) do |f| %&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :commenter %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number4 index3 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_field :commenter
                                %&gt;</code></div>
                            <div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.label :body %&gt;&lt;br&gt;</code>
                            </div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.text_area :body
                                %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number11 index10 alt2"><code class="plain spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">&lt;%= f.submit %&gt;</code>
                            </div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number13 index12 alt2"><code class="plain plain">&lt;% end %&gt;</code>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Then you make the <code>app/views/articles/show.html.erb</code> look like the following:</p>

<div class="code_container">
    <div>
        <div id="highlighter_550864" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Title:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.title %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Text:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= @article.text %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="plain plain">&lt;h2&gt;Comments&lt;/h2&gt;</code>
                            </div>
                            <div class="line number12 index11 alt1"><code class="plain plain">&lt;%= render
                                @article.comments %&gt;</code></div>
                            <div class="line number13 index12 alt2">&nbsp;</div>
                            <div class="line number14 index13 alt1"><code class="plain plain">&lt;h2&gt;Add a comment:&lt;/h2&gt;</code>
                            </div>
                            <div class="line number15 index14 alt2"><code class="plain plain">&lt;%= render
                                "comments/form" %&gt;</code></div>
                            <div class="line number16 index15 alt1">&nbsp;</div>
                            <div class="line number17 index16 alt2"><code class="plain plain">&lt;%= link_to 'Edit
                                Article', edit_article_path(@article) %&gt; |</code></div>
                            <div class="line number18 index17 alt1"><code class="plain plain">&lt;%= link_to 'Back to
                                Articles', articles_path %&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The second render just defines the partial template we want to render,
    <code>comments/form</code>. Arasu is smart enough to spot the forward slash in that
    string and realize that you want to render the <code>_form.html.erb</code> file in
    the <code>app/views/comments</code> directory.</p>

<p>The <code>@article</code> object is available to any partials rendered in the view because
    we defined it as an instance variable.</p>

<h3 id="deleting-comments">8 Deleting Comments</h3>

<p>Another important feature of a blog is being able to delete spam comments. To do
    this, we need to implement a link of some sort in the view and a <code>destroy</code>
    action in the <code>CommentsController</code>.</p>

<p>So first, let's add the delete link in the
    <code>app/views/comments/_comment.html.erb</code> partial:</p>

<div class="code_container">
    <div>
        <div id="highlighter_850030" class="syntaxhighlighter nogutter  plain">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number2 index1 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Commenter:&lt;/strong&gt;</code></div>
                            <div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= comment.commenter %&gt;</code></div>
                            <div class="line number4 index3 alt1"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number5 index4 alt2">&nbsp;</div>
                            <div class="line number6 index5 alt1"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;strong&gt;Comment:&lt;/strong&gt;</code></div>
                            <div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= comment.body %&gt;</code></div>
                            <div class="line number9 index8 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                            <div class="line number10 index9 alt1">&nbsp;</div>
                            <div class="line number11 index10 alt2"><code class="plain plain">&lt;p&gt;</code></div>
                            <div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;</code><code
                                    class="plain plain">&lt;%= link_to 'Destroy Comment', [comment.article,
                                comment],</code></div>
                            <div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">method: :delete,</code></div>
                            <div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="plain plain">data: { confirm: 'Are you sure?' } %&gt;</code></div>
                            <div class="line number15 index14 alt2"><code class="plain plain">&lt;/p&gt;</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Clicking this new "Destroy Comment" link will fire off a <code>DELETE
    /articles/:article_id/comments/:id</code> to our <code>CommentsController</code>, which can then
    use this to find the comment we want to delete, so let's add a <code>destroy</code> action
    to our controller (<code>app/controllers/comments_controller.rb</code>):</p>

<div class="code_container">
    <div>
        <div id="highlighter_593936" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">CommentsController &lt; ApplicationController</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">create</code></div>
                            <div class="line number3 index2 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@article</code> <code
                                    class="go plain">= Article.find(params[</code><code class="go color2">:article_id</code><code
                                    class="go plain">])</code></div>
                            <div class="line number4 index3 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@comment</code> <code
                                    class="go plain">= </code><code class="go variable bold">@article</code><code
                                    class="go plain">.comments.create(comment_params)</code></div>
                            <div class="line number5 index4 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">redirect_to article_path(</code><code
                                    class="go variable bold">@article</code><code class="go plain">)</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number7 index6 alt2">&nbsp;</div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">destroy</code></div>
                            <div class="line number9 index8 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@article</code> <code
                                    class="go plain">= Article.find(params[</code><code class="go color2">:article_id</code><code
                                    class="go plain">])</code></div>
                            <div class="line number10 index9 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@comment</code> <code
                                    class="go plain">= </code><code class="go variable bold">@article</code><code
                                    class="go plain">.comments.find(params[</code><code class="go color2">:id</code><code
                                    class="go plain">])</code></div>
                            <div class="line number11 index10 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@comment</code><code
                                    class="go plain">.destroy</code></div>
                            <div class="line number12 index11 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">redirect_to article_path(</code><code
                                    class="go variable bold">@article</code><code class="go plain">)</code></div>
                            <div class="line number13 index12 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number14 index13 alt1">&nbsp;</div>
                            <div class="line number15 index14 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">private</code></div>
                            <div class="line number16 index15 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go keyword">def</code> <code
                                    class="go plain">comment_params</code></div>
                            <div class="line number17 index16 alt2"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">params.require(</code><code
                                    class="go color2">:comment</code><code class="go plain">).permit(</code><code
                                    class="go color2">:commenter</code><code class="go plain">, </code><code
                                    class="go color2">:body</code><code class="go plain">)</code></div>
                            <div class="line number18 index17 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go keyword">end</code></div>
                            <div class="line number19 index18 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>The <code>destroy</code> action will find the article we are looking at, locate the comment
    within the <code>@article.comments</code> collection, and then remove it from the
    database and send us back to the show action for the article.</p>
<h4 id="deleting-associated-objects">8.1 Deleting Associated Objects</h4>

<p>If you delete an article then its associated comments will also need to be
    deleted. Otherwise they would simply occupy space in the database. Arasu allows
    you to use the <code>dependent</code> option of an association to achieve this. Modify the
    Article model, <code>app/models/article.rb</code>, as follows:</p>

<div class="code_container">
    <div>
        <div id="highlighter_176647" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">Article &lt; ActiveRecord::Base</code></div>
                            <div class="line number2 index1 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">has_many </code><code class="go color2">:comments</code><code
                                    class="go plain">, dependent: </code><code class="go color2">:destroy</code>
                            </div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">validates </code><code class="go color2">:title</code><code
                                    class="go plain">, presence: </code><code class="go keyword">true</code><code
                                    class="go plain">,</code></div>
                            <div class="line number4 index3 alt1"><code class="go spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code
                                    class="go plain">length: { minimum: </code><code class="go constants">5</code>
                                <code class="go plain">}</code></div>
                            <div class="line number5 index4 alt2"><code class="go keyword">end</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<h3 id="security">9 Security</h3>
<h4 id="basic-authentication">9.1 Basic Authentication</h4>

<p>If you were to publish your blog online, anybody would be able to add, edit and
    delete articles or delete comments.</p>

<p>Arasu provides a very simple HTTP authentication system that will work nicely in
    this situation.</p>

<p>In the <code>ArticlesController</code> we need to have a way to block access to the various
    actions if the person is not authenticated, here we can use the Arasu
    <code>http_basic_authenticate_with</code> method, allowing access to the requested
    action if that method allows it.</p>

<p>To use the authentication system, we specify it at the top of our
    <code>ArticlesController</code>, in this case, we want the user to be authenticated on
    every action, except for <code>index</code> and <code>show</code>, so we write that in
    <code>app/controllers/articles_controller.rb</code>:</p>

<div class="code_container">
    <div>
        <div id="highlighter_830526" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">ArticlesController &lt; ApplicationController</code></div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">http_basic_authenticate_with name: </code><code
                                    class="go string">"dhh"</code><code class="go plain">, password: </code><code
                                    class="go string">"secret"</code><code class="go plain">, except: [</code><code
                                    class="go color2">:index</code><code class="go plain">, </code><code
                                    class="go color2">:show</code><code class="go plain">]</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">index</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@articles</code> <code
                                    class="go plain">= Article.all</code></div>
                            <div class="line number7 index6 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number8 index7 alt1">&nbsp;</div>
                            <div class="line number9 index8 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># snipped for brevity</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>We also want to allow only authenticated users to delete comments, so in the
    <code>CommentsController</code> (<code>app/controllers/comments_controller.rb</code>) we write:</p>

<div class="code_container">
    <div>
        <div id="highlighter_152724" class="syntaxhighlighter nogutter  go">
            <table border="0" cellpadding="0" cellspacing="0">
                <tbody>
                <tr>
                    <td class="code">
                        <div class="container">
                            <div class="line number1 index0 alt2"><code class="go keyword">class</code> <code
                                    class="go plain">CommentsController &lt; ApplicationController</code></div>
                            <div class="line number2 index1 alt1">&nbsp;</div>
                            <div class="line number3 index2 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go plain">http_basic_authenticate_with name: </code><code
                                    class="go string">"dhh"</code><code class="go plain">, password: </code><code
                                    class="go string">"secret"</code><code class="go plain">, only: </code><code
                                    class="go color2">:destroy</code></div>
                            <div class="line number4 index3 alt1">&nbsp;</div>
                            <div class="line number5 index4 alt2"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">def</code> <code class="go plain">create</code></div>
                            <div class="line number6 index5 alt1"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go variable bold">@article</code> <code
                                    class="go plain">= Article.find(params[</code><code class="go color2">:article_id</code><code
                                    class="go plain">])</code></div>
                            <div class="line number7 index6 alt2"><code class="go spaces">
                                &nbsp;&nbsp;&nbsp;&nbsp;</code><code class="go plain">...</code></div>
                            <div class="line number8 index7 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go keyword">end</code></div>
                            <div class="line number9 index8 alt2">&nbsp;</div>
                            <div class="line number10 index9 alt1"><code class="go spaces">&nbsp;&nbsp;</code><code
                                    class="go comments"># snipped for brevity</code></div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<p>Now if you try to create a new article, you will be greeted with a basic HTTP
    Authentication challenge</p>

<p><img src="images/getting_started/challenge.png" alt="Basic HTTP Authentication Challenge"></p>

<p>Other authentication methods are available for Arasu applications. Two popular
    authentication add-ons for Arasu are the
    <a href="https://github.com/plataformatec/devise">Devise</a> arasu engine and
    the <a href="https://github.com/binarylogic/authlogic">Authlogic</a> gem,
    along with a number of others.</p>
<h4 id="other-security-considerations">9.2 Other Security Considerations</h4>

<p>Security, especially in web applications, is a broad and detailed area. Security
    in your Arasu application is covered in more depth in
    The <a href="security.html">Go on Arasu Security Guide</a></p>

<h3 id="what-s-next-questionmark">10 What's Next?</h3>

<p>Now that you've seen your first Arasu application, you should feel free to
    update it and experiment on your own. But you don't have to do everything
    without help. As you need assistance getting up and running with Arasu, feel
    free to consult these support resources:</p>
<ul>
    <li>The <a href="index.html">Go on Arasu guides</a>
    </li>
    <li>The <a href="http://arasututorial.org/book">Go on Arasu Tutorial</a>
    </li>
    <li>The <a href="http://groups.google.com/group/goonarasu-talk">Go on Arasu mailing list</a>
    </li>
    <li>The <a href="irc://irc.freenode.net/#goonarasu">#goonarasu</a> channel on irc.freenode.net</li>
</ul>
<p>Arasu also comes with built-in help that you can generate using the rake
    command-line utility:</p>
<ul>
    <li>Running <code>rake doc:guides</code> will put a full copy of the Arasu Guides in the
        <code>doc/guides</code> folder of your application. Open <code>doc/guides/index.html</code> in your
        web browser to explore the Guides.
    </li>
    <li>Running <code>rake doc:arasu</code> will put a full copy of the API documentation for
        Arasu in the <code>doc/api</code> folder of your application. Open <code>doc/api/index.html</code>
        in your web browser to explore the API documentation.
    </li>
</ul>
<div class="info"><p>To be able to generate the Arasu Guides locally with the <code>doc:guides</code> rake
    task you need to install the RedCloth gem. Add it to your <code>Gemfile</code> and run
    <code>bundle install</code> and you're ready to go.</p></div>
<h3 id="configuration-gotchas">11 Configuration Gotchas</h3>

<p>The easiest way to work with Arasu is to store all external data as UTF-8. If
    you don't, Go libraries and Arasu will often be able to convert your native
    data into UTF-8, but this doesn't always work reliably, so you're better off
    ensuring that all external data is UTF-8.</p>

<p>If you have made a mistake in this area, the most common symptom is a black
    diamond with a question mark inside appearing in the browser. Another common
    symptom is characters like "Ã¼" appearing instead of "ü". Arasu takes a number
    of internal steps to mitigate common causes of these problems that can be
    automatically detected and corrected. However, if you have external data that is
    not stored as UTF-8, it can occasionally result in these kinds of issues that
    cannot be automatically detected by Arasu and corrected.</p>

<p>Two very common sources of data that are not UTF-8:</p>
<ul>
    <li>Your text editor: Most text editors (such as TextMate), default to saving
        files as UTF-8. If your text editor does not, this can result in special
        characters that you enter in your templates (such as é) to appear as a diamond
        with a question mark inside in the browser. This also applies to your i18n
        translation files. Most editors that do not already default to UTF-8 (such as
        some versions of Dreamweaver) offer a way to change the default to UTF-8. Do
        so.
    </li>
    <li>Your database: Arasu defaults to converting data from your database into UTF-8
        at the boundary. However, if your database is not using UTF-8 internally, it
        may not be able to store all characters that your users enter. For instance,
        if your database is using Latin-1 internally, and your user enters a Russian,
        Hebrew, or Japanese character, the data will be lost forever once it enters
        the database. If possible, use UTF-8 as the internal storage of your database.
    </li>
</ul>


<h3>Feedback</h3>

<p>
    You're encouraged to help improve the quality of this guide.
</p>

<p>
    Please contribute if you see any typos or factual errors.
    To get started, you can read our <a
        href="http://edgeguides.goonarasu.org/contributing_to_go_on_arasu.html#contributing-to-the-arasu-documentation">documentation
    contributions</a> section.
</p>

<p>
    You may also find incomplete content, or stuff that is not up to date.
    Please do add any missing documentation for master. Make sure to check
    <a href="http://edgeguides.goonarasu.org">Edge Guides</a> first to verify
    if the issues are already fixed or not on the master branch.
    Check the <a href="go_on_arasu_guides_guidelines.html">Go on Arasu Guides Guidelines</a>
    for style and conventions.
</p>

<p>
    If for whatever reason you spot something to fix but cannot patch it yourself, please
    <a href="https://github.com/arasu/arasu/issues">open an issue</a>.
</p>

<p>And last but not least, any kind of discussion regarding Go on Arasu
    documentation is very welcome in the <a href="http://groups.google.com/group/goonarasu-docs">goonarasu-docs
        mailing list</a>.
</p>
</div>